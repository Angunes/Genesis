package com.mygdx.game;

import com.badlogic.gdx.ApplicationAdapter;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.GL20;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;


import java.util.Random;

public class Bioma extends ApplicationAdapter {
	SpriteBatch batch;
	Texture img;
	Texture imgFundo;
	
	final public int largura = 20;
	final public int altura = 15;
	final public int bHor = 60;
	final public int bVer = 40;
	Bloco blocos[][] = new Bloco[bVer][bHor];
	
	Mapa solo[] = new Mapa[103];
	Random bioma = new Random();
	Random tamanhoBioma = new Random();
	
	
	//funções de controle de jogo
	public void geraMapa(){
		int comparador;
		int gerado = 0;
		int tam = 0;
		int ant = 0;
			do{
			tam += tamanhoBioma.nextInt(10) + 1;
			comparador = bioma.nextInt(4)+1;
				if( comparador == 1){
					for(int i = ant; i <tam; i++){
						/*System.out.println(i + " é vermelho");
						solo[i].bioma = new Texture("biom1.png");
						solo[i].mudaEstado();*/
						
						
						ant = tam;
					}
				}
				if( comparador == 2){
					for(int i = ant; i <tam; i++){
						/*System.out.println(i + " é azul");
						solo[i].bioma = new Texture("biom2.png");
						solo[i].mudaEstado();*/
						ant = tam;
					}
				}
				if( comparador == 3){
					for(int i = ant; i <tam; i++){
						/*System.out.println(i + " é preto");
						solo[i].bioma = new Texture("biom3.png");
						solo[i].mudaEstado();*/
						ant = tam;
					}
				}
				if( comparador == 4){
					for(int i = ant; i <tam; i++){
						/*System.out.println(i + " é verde");
						solo[i].bioma = new Texture("biom4.png");
						solo[i].mudaEstado();*/
						ant = tam;
					}
				}
			}while(tam < 100);
	}

	//funções de desenhar na tela
	/*public void desenhaMapa(){
		int distanciaX = 0;
		int distanciaY = 0;
		for(int i = 0; i < 100; i++){
			if(solo[i].estado == true){
				batch.draw(solo[i].bioma,0 + distanciaX , 0);
			}
		distanciaX += 6;
		}
	}*/
	/*public void desenhaMontanha(int dist, Texture montanha){
		Random alturaMontanha = new Random();
		Random verificador = new Random();
		int distX = 0, distY = 0;
		int altura;
		if(verificador.nextInt(2) == 0){//ira gerar a montanha
			altura = alturaMontanha.nextInt(300);
				for(int i = 0; i < altura; i++){
					for(int j = 0; j < dist; j--){
						batch.draw(montanha, j + distX, i + distY);
					}
				}
		}
	}*/
	
	public void draw(){
		for(int i=0;i<bVer;i++){
			for(int j=0;j<bHor;j++){
				if(blocos[i][j].type==1){
					batch.draw(img, blocos[i][j].posX, blocos[i][j].posY, largura, altura);
				}
				if(blocos[i][j].type==2){
					batch.draw(img, blocos[i][j].posX, blocos[i][j].posY, largura, altura);
				}
			}
		}
	}
	
/*___________________________________________________*/
	@Override
	public void create () {
		batch = new SpriteBatch();

		for(int i = 0; i < 103; i++){
			solo[i] = new Mapa(); 
		}
		for(int i=0;i<bVer;i++){
			for(int j=0;j<bHor;j++){
				blocos[i][j] = new Bloco(1,i+j);
				blocos[i][j].posX = i*20;
				blocos[i][j].posY = j*15;
			}
		}
		
//		geraMapa();
		imgFundo = new Texture("field.png");
	}

	@Override
	public void render () {
		Gdx.gl.glClearColor(0, 0, 0, 0);
		Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
		batch.begin();
		batch.draw(imgFundo, 0, 0);
//		desenhaMapa();
		draw();
		batch.end();
	}
	
	@Override
	public void dispose () {
		batch.dispose();
		img.dispose();
			for(int i = 0; i < 103; i++){
				solo[i].bioma.dispose();
			}
		imgFundo.dispose();
	}
}
